---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import { dateFormat } from '../utils/dateFormat';

const title = 'Homepage';
const description = 'Welcome to our homepage!';

//microCMS呼び出し
import { getBlogs } from "../library/microcms";
const response = await getBlogs({ fields: ["id", "title", "publishedAt", "eyecatch", "category"] });
console.log(response)
---

<Layout title={ title } description={ description }>
  <div class="mv">
    News
  </div>
  <ul class="list">
    {
      response.contents.map((content: any) => (
        <li>
          <p style="width: 100%;">{dateFormat(content.publishedAt)}</p>
          {
            content.category && (
              <div class="tag-wrap"><a href={`/category/${content.category.id}`} class="tag">{content.category.name}</a></div>
            )
          }
          <a href={content.id}>
            <p>{content.title}</p>
            <div class="thumb">
              {content.eyecatch && (
                <img src={content.eyecatch.url} alt="サムネイル" />
              )}
            </div>
          </a>
        </li>
      ))
    }
  </ul>
</Layout>


<style scoped>
  .thumb {
    width: 100px;
    height: 100px;
    overflow: hidden;
  }
  .thumb img {
    object-fit: contain;
    width: 100%;
  }

  .mv {
    height: 20vh;
    display: flex;
    align-items: center;
    padding: 3rem;
    font-size: 200%;
    background-color: cadetblue;
    color: white;
  }


</style>

